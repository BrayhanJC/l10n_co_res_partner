<?xml version="1.0" encoding="utf-8" ?>
<openerp>
    <data>
        <record id="view_partner_form" model="ir.ui.view">
           <field name="inherit_id" ref="base.view_partner_form" />
            <field name="model">res.partner</field>
            <field name="arch" type="xml">

                <field name="name" position="attributes">
                    <attribute name="invisible">True</attribute>
                </field>

                <field name="company_type" position="attributes">
                    <attribute name="invisible">True</attribute>
                </field>

                <field name="state_id" position="replace">
                    <field name="state_id" invisible="1"/>
                </field>

                <field name="city" position="replace">
                    <field name="city" invisible="1"/>
                </field>

                <field name="country_id" position="replace">
                    <field name="country_id" invisible="1"/>
                </field>


                <!-- Dynamic Form which opens when creating a related contact to a company -->
                <xpath expr="(//field[@name='name'])[4]" position="before">

                    <field name="x_pn_nombre1"
                           placeholder="Primer Nombre" />
                    <field name="x_pn_nombre2"
                           placeholder="Segundo Nombre" />
                    <field name="x_pn_apellido1"
                           placeholder="Primer Apellido"/>
                    <field name="x_pn_apellido2"
                           placeholder="Segundo Apellido"  />

                    <field name="doctype" />
                    <field name="xidentification"
                           placeholder="No. ej. 900301230"
                           attrs="{'invisible':['|','|',('doctype', '=', 43), ('doctype', '=', 99), ('doctype', '=', 98)]}" />
                    <field name="formatedNit"
                           attrs="{'invisible':[('doctype', '!=', 31)]}"
                           readonly="1" />
                    <field name="dv" invisible="1" />
                    <field name="x_pn_retri" />
                    <field name="ciiu" domain="[('type', '=', 'other')]" />
                </xpath>

                <field name="company_type" position="after">
                    <field invisible="1"
                           name="company_type"
                           widget="radio"
                           class="oe_edit_only"
                           options="{'horizontal': true}"/>

                    <field name="is_company" class="oe_inline" modifiers="{}"/>
                    <label for="is_company" string="¿Es una empresa?"/>
                </field>

                <field name="parent_id" position="before">
                    <h3>
                        <field
                                name="name"
                                attrs="{'invisible':[('x_pn_nombre1', '=', ''),('companyName', '=', False)]}"
                                placeholder="¡Campo se llenará automáticamente!" />
                    </h3>
                </field>

                <field name="type" position="before">
                    <field name="personType"
                           attrs="{'readonly':[('company_type', '=', 'person')]}"/>
                    <field name="doctype" />
                    <field name="xidentification"
                           placeholder="No. ej. 900301230"
                           attrs="{'invisible':['|','|',('doctype', '=', 43), ('doctype', '=', 99), ('doctype', '=', 98)]}" />
                    <field name="formatedNit"
                           attrs="{'invisible':[('doctype', '!=', 31)]}"
                           readonly="1" />
                    <field name="dv" invisible="1" />
                    <field name="companyName"
                           placeholder="Nombre de la compañia"
                           attrs="{'invisible':['|',('personType', '=', 1),('company_type', '=', 'person')], 'required': [('personType', '=', 2)]}" />
                    <field name="x_pn_nombre1"
                           placeholder="Primer Nombre"
                           default_focus="1"
                           attrs="{'invisible':['|',('personType', '=', 2)], 'required': [('personType', '=', 1)]}" />
                    <field name="x_pn_nombre2"
                           placeholder="Segundo Nombre"
                           attrs="{'invisible':['|',('personType', '=', 2)]}" />
                    <field name="x_pn_apellido1"
                           placeholder="Primer Apellido"
                           attrs="{'invisible':['|',('personType', '=', 2)], 'required': [('personType', '=', 1)]}" />
                    <field name="x_pn_apellido2"
                           placeholder="Segundo Apellido"
                           attrs="{'invisible':['|',('personType', '=', 2)]}"  />
                    <field name="x_pn_retri" />
                    <field name="ciiu" domain="[('type', '=', 'other')]" />

                </field>
                <field name="website" position="before">

                    <field name="change_country" class="oe_edit_only"
                           attrs="{'invisible':[('change_country', '=', True)]}"/>

                    <field name="country_id"
                           attrs="{'readonly':[('change_country', '=', False)]}"
                           options='{"no_open": True, "no_create": True}'
                           placeholder="País" on_change="onchange_location(country_id, False)"
                           class="o_address_country" /> <!-- Country -->
                    <field name="state_id"
                           options="{'no_open': True}"
                           placeholder="Departamento"
                           attrs="{'readonly':[('change_country', '=', False)], 'invisible':[('country_id', '=', False)], 'required': [('xcity', '!=', False)]}" on_change="onchange_location(False, state_id)" /> <!-- Department -->
                    <field name="xcity"
                           options="{'no_open': True}"
                           placeholder="Ciudad"
                           attrs="{'readonly':[('change_country', '=', False)], 'invisible':[('state_id', '=', False)]}" />  <!-- City / Municipality -->
                </field>
            </field>
        </record>

        <record id="view_tree_res_partner_inherited" model="ir.ui.view">
            <field name="name">Partner – User extension</field>
                <field name="model">res.partner</field>
                <field name="inherit_id" ref="base.view_partner_tree"/>
                <field name="arch" type="xml">
                    <tree position="attributes">
                        <attribute name="colors">red:xidentification==False;red:xidentification==''</attribute>
                    </tree>
                <field name="phone" position="before">
                    <field name="xidentification" string="Identificación" />
                </field>
            </field>
        </record>

        <record model="ir.ui.view" id="base.res_partner_kanban_view">
            <field name="name">base.res_partner_kanban_view</field>
            <field name="model">res.partner</field>
            <field name="arch" type="xml">
                <kanban class="o_res_partner_kanban">
                    <field name="color"/>
                    <field name="display_name"/>
                    <field name="title"/>
                    <field name="email"/>
                    <field name="parent_id"/>
                    <field name="is_company"/>
                    <field name="function"/>
                    <field name="phone"/>
                    <field name="street"/>
                    <field name="street2"/>
                    <field name="zip"/>
                    <field name="city"/>
                    <field name="country_id"/>
                    <field name="mobile"/>
                    <field name="state_id"/>
                    <field name="category_id"/>
                    <field name="image"/>
                    <field name="type"/>
                    <field name="xidentification" />
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_global_click o_res_partner_kanban">
                                <div class="o_kanban_tags_section oe_kanban_partner_categories"/>
                                <div class="o_kanban_image">
                                    <t t-if="record.image.raw_value">
                                        <img t-att-src="kanban_image('res.partner', 'image_small', record.id.value)"/>
                                    </t>
                                    <t t-if="!record.image.raw_value">
                                        <t t-if="record.type.raw_value === 'delivery'">
                                            <img t-att-src="_s + &quot;/base/static/src/img/truck.png&quot;" class="o_kanban_image oe_kanban_avatar_smallbox"/>
                                        </t>
                                        <t t-if="record.type.raw_value === 'invoice'">
                                            <img t-att-src="_s + &quot;/base/static/src/img/money.png&quot;" class="o_kanban_image oe_kanban_avatar_smallbox"/>
                                         </t>
                                        <t t-if="record.type.raw_value != 'invoice' &amp;&amp; record.type.raw_value != 'delivery'">
                                            <t t-if="record.is_company.raw_value === true">
                                                <img t-att-src="_s + &quot;/base/static/src/img/company_image.png&quot;"/>
                                            </t>
                                            <t t-if="record.is_company.raw_value === false">
                                                <img t-att-src="_s + &quot;/base/static/src/img/avatar.png&quot;"/>
                                            </t>
                                        </t>
                                    </t>
                                </div>
                                <div class="oe_kanban_details">
                                    <strong class="oe_partner_heading"><field name="display_name"/></strong>
                                    <div t-if="!record.xidentification.raw_value"
                                         style="margin: 0px; padding:3px 3px 10px 3px; color:#F77171; background-color: #FFF3F3;">
                                        <b>Datos incompletos!</b><br /> Por favor, actualice pronto!
                                    </div>
                                    <ul>
                                        <li t-if="record.parent_id.raw_value and !record.function.raw_value"><field name="parent_id"/></li>
                                        <li t-if="!record.parent_id.raw_value and record.function.raw_value"><field name="function"/></li>
                                        <li t-if="record.parent_id.raw_value and record.function.raw_value"><field name="function"/> at <field name="parent_id"/></li>
                                        <li t-if="record.city.raw_value and !record.country_id.raw_value"><field name="city"/></li>
                                        <li t-if="!record.city.raw_value and record.country_id.raw_value"><field name="country_id"/></li>
                                        <li t-if="record.city.raw_value and record.country_id.raw_value"><field name="city"/>, <field name="country_id"/></li>
                                        <li t-if="record.email.raw_value" class="o_text_overflow"><field name="email"/></li>
                                    </ul>
                                    <div class="oe_kanban_partner_links"/>
                                </div>
                            </div>

                        </t>
                    </templates>
                </kanban>
            </field>
        </record>


        <record id="view_search_res_partner_inherited" model="ir.ui.view">
            <field name="name">Search - extension</field>
                <field name="model">res.partner</field>
                <field name="inherit_id" ref="base.view_res_partner_filter"/>
                <field name="arch" type="xml">
                    <field name="name" position="replace">
                        <field name="name" filter_domain="['|',('display_name','ilike',self), ('xidentification','ilike',self)]" />
                    </field>
            </field>
        </record>

    </data>
</openerp>